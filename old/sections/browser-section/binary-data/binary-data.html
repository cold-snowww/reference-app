<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–∞–π–ª—ã</title>
    <link rel="stylesheet" href="../../../css/common-styles.css">
    <link rel="stylesheet" href="../../../css/content-styles.css">
</head>
<body>

    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞—á–∞–ª–æ -->
    <!-- 
        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ –∫–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
        <pre data-formatted="js">code</pre>
        —Å–Ω–∏–ø–ø–µ—Ç - pref
        
        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
         <span data-reference="–°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">i</span>
        —Å–Ω–∏–ø–ø–µ—Ç - inf

        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∞ - subh
        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ - text
        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π —Å—Å—ã–ª–∫–∏ - olink
        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –º–∞—Ä–∫–µ—Ä–∞ - mlink
        –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - coimg
    -->     
    
    <h2 class="content-header">–ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–∞–π–ª—ã</h2>
  
    <h3 class="content-subheader">ArrayBuffer, –±–∏–Ω–∞—Ä–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã
        <a href="https://learn.javascript.ru/arraybuffer-binary-arrays#itogo" class="marked-link" target="_blank">‚û•</a>
    </h3>
    <pre data-formatted="js">
    let buffer = new ArrayBuffer(16);
    let view = new Uint16Array(buffer);
    
    Uint8Array, Uint16Array, Uint32Array, Uint8ClampedArray,
    Int8Array, Int16Array, Int32Array,
    Float32Array, Float64Array
    
    new TypedArray(buffer, [byteOffset], [length]);
    new TypedArray(object);
    new TypedArray(typedArray);
    new TypedArray(length);
    new TypedArray();
    
    view.BYTES_PER_ELEMENT  // 2
    view.byteLength         // 16
    view.length             // 8
    view.buffer             // buffer
    
    view.map/slice/find/reduce...() –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ array 
    view.splice/concat() –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    
    view.set(fromArr, [offset]);
    view.subarray([begin, end]);
    
    view[0] = 25;
    for(let i of view) {
        alert(i);
    }
    
    let superView = new DataView(buffer, [byteOffset], [byteLength]);
    superView.getUint8(0);
    superView.getUint16(0);
    superView.getUint32(0);
    superView.setUint16(0, 63200);</pre>

    <h3 class="content-subheader">TextDecoder –∏ TextEncoder
        <a href="https://learn.javascript.ru/text-decoder" class="marked-link" target="_blank">‚û•</a>
    </h3>
    <pre data-formatted="js">
    –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:
    let str = '‡Ωë·É¶·±¶ –ü—Ä–∏–≤–µ—Ç! Hello!';        <span data-reference="–°—Ç—Ä–æ–∫–∞ –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â—è—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã UNICODE">i</span> 

    const encoder = new TextEncoder();      <span data-reference="–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—å–µ–∫—Ç–∞ —ç–Ω–∫–æ–¥–µ—Ä–∞">i</span>
    let uInt = encoder.encode(str);         <span data-reference="–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –±–∏–Ω–∞—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ Uint8Array, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–¥–∏—Ä–æ–≤–∫–∞ utf-8.">i</span>

    const decoder = new TextDecoder();      <span data-reference="–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–∫–æ–¥–µ—Ä–∞, –ø–æ–ª–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: new TextDecoder(['–∫–æ–¥–∏—Ä–æ–≤–∫–∞'], [{fatal: false, ignoreBOM: false}]); –ö–æ–¥–∏—Ä–æ–≤–∫–∞ - utf-8 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è big5, windows-1251 –∏ –¥—Ä.">i</span>         
    let decodedStr = decoder.decode(uInt);  <span data-reference="–î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –ø–æ–ª–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: decode(buffer, {stream: false}); stream ‚Äì true –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö">i</span>

    –ò–∑–≤—Ä–∞—â–µ–Ω–∏—è:
    let strSecond = 'Hello!';
    let uIntSecond = new Uint8Array(16);                                
    let uIntThird = new Uint8Array([207, 240, 232, 226, 229, 242]);     <span data-reference="–ù–æ–º–µ—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã ASCII 0-255">i</span>

    encoder.encodeInto(strSecond, uIntSecond);                          <span data-reference="–ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±–∏–Ω–∞—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ Uint8Array">i</span>

    const decoder = new TextDecoder(); 
    let decodedSecond = decoder.decode(uIntSecond);
    
    const decoderKyr = new TextDecoder('windows-1251');                 <span data-reference="–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–∫–æ–¥–µ—Ä–∞ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π windows-1251">i</span>
    let decodedThird = decoderKyr.decode(uIntThird);</pre>

    <h3 class="content-subheader">Blob
        <a href="https://learn.javascript.ru/blob#itogo" class="marked-link" target="_blank">‚û•</a>
    </h3>
    <pre data-formatted="js">
    let blob = new Blob([Blob,BufferSource,String], {       <span data-reference="–°–æ–∑–¥–∞–Ω–∏–µ Blob">i</span>
        type: 'text/plain' / 'image/png' / etc. ,
        endings: 'transparent' / 'native'
    }); 

    canvas.toBlob(function(blob) {...}, 'image/png');       <span data-reference="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Blob —á–µ—Ä–µ–∑ Canvas">i</span>

    let fileReader = new FileReader();                      <span data-reference="ArrayBuffer –∏–∑ Blob">i</span>
    fileReader.readAsArrayBuffer(blob);
    fileReader.onload = function(event) {
        let arrayBuffer = fileReader.result;
    };

    blob.slice([byteStart], [byteEnd], [contentType]);      <span data-reference="–°—Ä–µ–∑ Blob">i</span>

    link.href = URL.createObjectURL(blob);                  <span data-reference="–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Blob –∫–∞–∫ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ URL">i</span>
    URL.revokeObjectURL(link.href);</pre>

    <h3 class="content-subheader">File –∏ FileReader
        <a href="https://learn.javascript.ru/file#itogo" class="marked-link" target="_blank">‚û•</a>
    </h3>
    <pre data-formatted="js">
    File –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç Blob!

    let file = new File(fileParts, fileName, [{lastModified: 17522}]); <span data-reference="–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞">i</span>
    let file = input.files[0];                                         <span data-reference="–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ input">i</span>

    file.name                                       
    file.lastModified                               <span data-reference="–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ –≤ —Ç–∞–π–º—à—Ç–∞–º–ø–µ">i</span>

    let reader = new FileReader();                  <span data-reference="–°–æ–∑–¥–∞–Ω–∏–µ FileReader">i</span>

    reader.readAsArrayBuffer(blob/file)             <span data-reference="–ú–µ—Ç–æ–¥—ã FileReader –¥–ª—è —á—Ç–µ–Ω–∏—è, –ø–æ —Ö–æ–¥—É —á—Ç–µ–Ω–∏—è –Ω–∞ reader –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–æ–±—ã—Ç–∏—è">i</span>
    reader.readAsText(blob/file, [encoding])
    reader.readAsDataURL(blob/file);
    reader.abort()

    'loadstart', 'progress', 'load'                 <span data-reference="–°–æ–±—ã—Ç–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏–µ –Ω–∞ reader –≤–æ –≤—Ä–µ–º—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞">i</span>
    'abort', 'error', 'loadend'

    reader.result                                   <span data-reference="–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é —á—Ç–µ–Ω–∏—è –≤ reader –ø–æ—è–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞">i</span>
    reader.error

    –ü—Ä–∏–º–µ—Ä:

    reader.addEventListener('load', read);
    reader.readAsText(file, 'utf-8');

    function read() {
        console.log(reader.result);
    }</pre>

    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω–µ—Ü -->

    <!-- –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ—Ä–µ–π–º–∞ -->
    <div class="content-navigation">
        <p class="section-indicator">Browser</p>   
        <button class="navigation-button" id="navigation-back">‚óÄ</button>
        <button class="navigation-button" id="navigation-reload">üóò</button>
        <button class="navigation-button" id="navigation-next">‚ñ∂</button>
    </div>
    <p id="reference-display"></p>
    <script src="../../../js/content.js"></script> 
</body>
</html>