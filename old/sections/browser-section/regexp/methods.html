<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript content</title>
    <link rel="stylesheet" href="../../../css/common-styles.css">
    <link rel="stylesheet" href="../../../css/content-styles.css">
</head>
<body>

    <!-- Содержимое начало -->
    <!-- 
        Для добавления форматированного блока кода использовать 
        <code><pre data-formatted="js">code</pre></code>
        сниппет - pref
        
        Для добавления справочного элемента использовать 
         <span data-reference="Справочная информация">i</span>
        сниппет - inf

        Для добавления подзаголовка - subh
        Для добавления текста - text
        Для добавление внешней ссылки - olink
    -->     
    
    <h2 class="content-subheader">Методы RegExp и String
        <a href="https://learn.javascript.ru/regexp-methods" class="marked-link" target="_blank">➥</a>
    </h2>
    <h3 class="content-subheader">str.match(regexp)</h3>
    <pre data-formatted="js">
// Без флага g  и скобочных групп в регулярном выражении
    result = [                          <span data-reference="Результат - массив">i</span>
        0: 'TNT',                       <span data-reference="Найденное совпадение">i</span>
        index: 15,                      <span data-reference="Индекс совпадения">i</span>
        input: 'We have to use TNT',    <span data-reference="Исходная строка для поиска">i</span>
        groups: undefined               <span data-reference="Группы">i</span>
    ];

// Без флага g  со скобочными группами в регулярном выражении:
    result = [
        0: 'TNT is 850',                <span data-reference="Найденное совпадение целиком">i</span>
        1: 'TNT',                       <span data-reference="Содержимое 1-ой скобочной группы">i</span>
        2: '850',                       <span data-reference="Содержимое 2-ой скобочной группы">i</span>
        index: 0,                       <span data-reference="Индекс совпадения">i</span>
        input: 'TNT is 850$ per kilo',  <span data-reference="Исходная строка для поиска">i</span>
        groups: undefined               <span data-reference="Группы">i</span>
    ];

// Без флага g с именованными скобочными группами в регулярном выражении:
    result = [
        'TNT is 850',                     <span data-reference="Найденное совпадение целиком">i</span>
        'TNT',                            <span data-reference="Содержимое 1-ой скобочной группы">i</span>
        '850',                            <span data-reference="Содержимое 2-ой скобочной группы">i</span>
        index: 0,                         <span data-reference="Индекс совпадения">i</span>
        input: 'TNT is 850 per kilo',     <span data-reference="Исходная строка для поиска">i</span>
        groups: {                         <span data-reference="Объект со структурой имя скобочной группы: значение">i</span>
            substance: 'TNT',             <span data-reference="Первая скобочная группа">i</span>
            price: '850'                  <span data-reference="Вторая скобочная группа">i</span>
        }
    ];

// С флагом g в регулярном выражении:
    result = ['TNT', 'RDX', 'HMTD'];    <span data-reference="Результат - массив с совпадениями">i</span>

// В условии отсутствия совпадений:
    let result = null;                  <span data-reference="Результат - null (не массив!)">i</span></pre>

    <h3 class="content-subheader">str.matchAll(regexp)</h3>
    <pre data-formatted="js">
// С флагом g в регулярном выражении
    Array.from(result) = [                     <span data-reference="Исходный результат - итеируемый объект. Получаем массив из итерируемого объекта.">i</span>
        [
            '&lt;h1&gt;Hello!&lt;/h1&gt;',                 <span data-reference="Результат - массив по первому совпадению расшифровку см. выше">i</span>
            'Hello!',
            index: 0,
            input: '&lt;h1&gt;Hello!&lt;/h1&gt; &lt;h2&gt;World&lt;/h2&gt;',
            groups: undefined
        ],
        [
            '&lt;h2&gt;World&lt;/h2&gt;',                  <span data-reference="Результат - массив по второму совпадению">i</span>
            'World',
            index: 16,
            input: '&lt;h1&gt;Hello!&lt;/h1&gt; &lt;h2&gt;World&lt;/h2&gt;',
            groups: undefined
        ]
    ];

// Без флага g в регулярном выражении:  <span data-reference="Аналогично с флагом g но в результате только первое совпадение.">i</span>

// При отсутствии совпадений с регулярным выражением: <span data-reference="Возвращается пустой перебираемый объект (не null!).">i</span></pre>

    <h3 class="content-subheader">str.split(regexp|substr, limit)</h3>
    <pre data-formatted="js">
    result = ['25', '48', '16', 'AF'];      <span data-reference="Метод делит строку по регулярному выражению, результат - массив частей. limit - целое число, максимальное количество найденных подстрок.">i</span></pre>  

    <h3 class="content-subheader">str.search(regexp)</h3>
    <pre data-formatted="js">
    result = 7;                             <span data-reference="Метод ищет только первое совпадение с  регулярным выражением. Возвращает его индекс или -1 если совпадений нет">i</span></pre>

    <h3 class="content-subheader">str.replace(str|regexp, str|func)</h3>
    <pre data-formatted="js">
// Две строки:
    let result = str.replace('.', '/');         <span data-reference="Метод возвращает новую строку, в которой только первая найденная . будет заменена на /">i</span>

// Регулярное выражение с флагом g и строка:
    let result = str.replace(/\./g, '/');       <span data-reference="Будут найдены все . и заменены на / Без флага g замена только первого совпадения. В строке замены можно использовать спецсимволы замены">i</span>

// Регулярное выражение без скобочных групп и функция:
    let result = str.replace(/[A-Z]{2,}/g,      <span data-reference="Совпадение заменяется результатом возвращенным из функции, match – совпадение, offset – его позиция, input – исходная строка">i</span>
        function(match, offset, input) {
            return '*censored*';
        }
    );

// Регулярное выражение со скобочными группами и функция:
    let result = str.replace(/(\d+)(\$)/g,                  <span data-reference="Аналогично предыдущему, p1-pn – содержимое скобочных групп, groups – обьект с парами имя скобочной группы - значение">i</span>
        function(match, p1, p2, offset, input, groups) {
            if(p2 == '$') return `₽${p1 * usd}`;
        }
    );</pre>

    <h3 class="content-subheader">regexp.exec(str)</h3>
    <pre data-formatted="js">
// В регулярном выражении нет флагов g и y:
    regexp.lastIndex;       <span data-reference="Свойство lastIndex игнорируется">i</span>
    result = [              <span data-reference="Результат - массив [0] - совпадение">i</span>
        'Space',
        index: 0,
        input: 'Space monkey around us',
        groups: undefined
    ];

// В регулярном выражении флаг g:
    regexp.lastIndex = 5;           <span data-reference="Поиск начнется с индекса 5 и далее">i</span>
    let result = regexp.exec(str)   <span data-reference="После следующего вызова regexp.exec, lastIndex будет изменен на индекс сразу после найденного совпадения, следующий вызов метода будет искать уже после этого совпадения">i</span>
    result = [...];                 <span data-reference="Аналогичен предыдущему, когда уже ничего не найдено result становится null, а lastIndex сбрасывается на 0, после чего поиск повторяется">i</span>

// В регулярном выражении флаг y:
    regexp.lastIndex = 5;           <span data-reference="Поиск только по индексу 5">i</span>
    let result = regexp.exec(str)   <span data-reference="После следующего вызова regexp.exec, lastIndex будет изменен на 0, повторный вызов метода будет искать только на индексе 0, затем lastIndex изменится на конец совпадения и т.д.">i</span>
    result = [...];                 <span data-reference="Аналогичен предыдущему, когда уже ничего не найдено result становится null, а lastIndex сбрасывается на 0, после чего поиск повторяется">i</span></pre>

    <h3 class="content-subheader">regexp.test(str)</h3>
    <pre data-formatted="js">
// Аналогично предыдущему в плане флагов g, y и lastIndex
    result = true / false; </pre>    

    <!-- Содержимое конец -->

    <!-- Панель навигации внутри фрейма -->
    <div class="content-navigation">
        <p class="section-indicator">Javascript</p>   
        <button class="navigation-button" id="navigation-back">◀</button>
        <button class="navigation-button" id="navigation-reload">🗘</button>
        <button class="navigation-button" id="navigation-next">▶</button>
    </div>
    <p id="reference-display"></p>
    <script src="../../../js/content.js"></script> 
</body>
</html>